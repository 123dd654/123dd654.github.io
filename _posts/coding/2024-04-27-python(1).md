---
layout: post
title: python(1)
date: 2024-04-27 14:54 +0900
description: python
image: https://github.com/123dd654/123dd654.github.io/assets/161431124/87b99b95-f93c-4a9c-a357-39d7b6ce6b26
category: 2024ë…„ë„ ê³µë¶€ë‚´ìš©
tags: python requests beautifulsoup4 lxml pandas selenium driver
published: true
sitemap: true
---

<h4>ì•ˆë…•í•˜ì„¸ìš”!ğŸ«¶<br/>
ì˜¤ëŠ˜ì€ pythonì„ í™œìš©í•˜ì—¬ ì• í”Œë®¤ì§ì‚¬ì´íŠ¸ì˜ ì°¨íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</h4>

### ë¨¼ì € pythonì„ ì‹œì‘í•˜ê¸° ì „ í•„ìˆ˜ë¡œ ì„¤ì¹˜í•´ì•¼í•˜ëŠ” íŒŒì¼ì— ëŒ€í•´ ë§ì”€ë“œë¦¬ê² ìŠµë‹ˆë‹¤ ğŸ˜‰

- python ì„¤ì¹˜
  ë³¸ì¸ì—ê²Œ ë§ëŠ” ìœˆë„ìš°ë‚˜ ë§¥ìš© pythonì„ ì„¤ì¹˜í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.
  ì¶”ê°€ì ìœ¼ë¡œ vscodeì—ì„œ pythonì„ ì„¤ì¹˜í•˜ë©´ pylance, python Debuggerì´ ìë™ì ìœ¼ë¡œ ì„¤ì¹˜ë©ë‹ˆë‹¤.

<br />

- requsets ì„¤ì¹˜
  ê° íŒ¨í‚¤ì§€ë“¤ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤
  ì•„ë˜ì—ëŠ” ì—­í• ë“¤ì„ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

```javascript
requests: HTTP ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ì•„ì˜¤ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ì›¹ í˜ì´ì§€ì˜ HTML ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
beautifulsoup4: HTML ë° XML ë¬¸ì„œë¥¼ íŒŒì‹±í•˜ê³  ê²€ìƒ‰í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ì›¹ ìŠ¤í¬ë˜í•‘í•  ë•Œ HTML ìš”ì†Œë¥¼ ì¶”ì¶œí•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
lxml: íŒŒì´ì¬ìš© XML ë° HTML ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, BeautifulSoupê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ HTMLì„ íŒŒì‹±í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
pandas: ë°ì´í„° ë¶„ì„ ë° ì¡°ì‘ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, í…Œì´ë¸” í˜•ì‹ì˜ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ íš¨ê³¼ì ì…ë‹ˆë‹¤.
selenium: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸ ìë™í™”ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì œì–´í•˜ê³  ë‹¤ì–‘í•œ ë™ì‘ì„ ìë™í™”í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
webdrivermanager : Selenium ì›¹ ë“œë¼ì´ë²„ì˜ ì„¤ì¹˜ ë° ê´€ë¦¬ë¥¼ ìë™í™”í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°œë°œìëŠ” ì›¹ ë“œë¼ì´ë²„ì˜ ë²„ì „ ë° ì„¤ì •ì„ ëª…ì‹œì ìœ¼ë¡œ ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.
```

- driver ì„¤ì¹˜
  ë³¸ì¸ì—ê²Œ ë§ëŠ” ìœˆë„ìš°ë‚˜ ë§¥ìš© pythonì„ ì„¤ì¹˜í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.
  https://chromedriver.chromium.org/downloads ë‹¤ìš´ë¡œë“œ ì‚¬ì´íŠ¸ ë‚¨ê²¨ë“œë¦½ë‹ˆë‹¤.

### ì½”ë“œë¥¼ í•˜ë‚˜ì”© ë³´ë©° ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ğŸ˜‰

- í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°

```javascript
from selenium import webdriver                                              # ì›¹ ìë™í™”ë¥¼ ìœ„í•œ Selenium ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
from selenium.webdriver.chrome.service import Service as ChromeService      # Chrome ì›¹ ë“œë¼ì´ë²„ ì„œë¹„ìŠ¤ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
from selenium.webdriver.chrome.options import Options as ChromeOptions      # Chrome ë¸Œë¼ìš°ì € ì˜µì…˜ì„ ì„¤ì •í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
from webdriver_manager.chrome import ChromeDriverManager                    # Chrome ì›¹ ë“œë¼ì´ë²„ë¥¼ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³  ê´€ë¦¬í•˜ëŠ” ChromeDriverManager í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
from selenium.webdriver.common.by import By                                 # ì›¹ ìš”ì†Œë¥¼ ì°¾ê¸° ìœ„í•œ ë°©ë²•ì„ ì œê³µí•˜ëŠ” By í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
from selenium.webdriver.support.ui import WebDriverWait                     # ì›¹ í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê¸° ìœ„í•œ WebDriverWait í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
from selenium.webdriver.support import expected_conditions as EC            # íŠ¹ì • ì¡°ê±´ì´ ì¶©ì¡±ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê¸° ìœ„í•œ expected_conditions í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
from bs4 import BeautifulSoup                                               # HTMLì„ íŒŒì‹±í•˜ê¸° ìœ„í•œ BeautifulSoup ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
from datetime import datetime                                               # ë‚ ì§œì™€ ì‹œê°„ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ datetime ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
import time                                                                 # ì‹œê°„ì„ ë‹¤ë£¨ê¸° ìœ„í•œ time ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
import json                                                                 # JSON íŒŒì¼ì„ ë‹¤ë£¨ê¸° ìœ„í•œ json ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
```

ì´ ì½”ë“œëŠ” ì›¹ ìë™í™”ì™€ HTML íŒŒì‹±ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
Seleniumì€ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì œì–´í•˜ê³ , BeautifulSoupì€ HTMLì„ íŒŒì‹±í•©ë‹ˆë‹¤.
ë˜í•œ ë‚ ì§œì™€ ì‹œê°„ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ datetimeê³¼ JSON íŒŒì¼ì„ ë‹¤ë£¨ê¸° ìœ„í•œ json ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ê°€ì ¸ì˜µë‹ˆë‹¤.

<br />

- í˜„ì¬ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°

```javascript
current_date = datetime.now().strftime("%Y-%m-%d")
filename = f"chart_apple100_{current_date}.json"
```

ì´ ë¶€ë¶„ì€ í˜„ì¬ ë‚ ì§œë¥¼ ê°€ì ¸ì™€ì„œ JSON íŒŒì¼ì˜ ì´ë¦„ì„ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
datetime.now().strftime("%Y-%m-%d")ëŠ” í˜„ì¬ ë‚ ì§œë¥¼ ë…„-ì›”-ì¼ í˜•ì‹ìœ¼ë¡œ ë¬¸ìì—´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
ê·¸ë¦¬ê³  ê·¸ ê°’ì„ ì´ìš©í•˜ì—¬ filename ë³€ìˆ˜ì— "chart*apple100*" ë’¤ì— í˜„ì¬ ë‚ ì§œë¥¼ ë¶™ì—¬ì„œ JSON íŒŒì¼ì˜ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤.
ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ë§¤ì¼ ìƒˆë¡œìš´ íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

- ì›¹ ë“œë¼ì´ë²„ ì„¤ì •

```javascript
options = ChromeOptions()                                                   # Chrome ë¸Œë¼ìš°ì € ì„¤ì •ì„ ìœ„í•œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
service = ChromeService(executable_path=ChromeDriverManager().install())    # Chrome ì›¹ ë“œë¼ì´ë²„ ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
```

ì—¬ê¸°ì„œëŠ” Chrome ë¸Œë¼ìš°ì €ì˜ ì˜µì…˜ì„ ì„¤ì •í•˜ê³ , Chrome ì›¹ ë“œë¼ì´ë²„ì˜ ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
ChromeOptions()ëŠ” Chrome ë¸Œë¼ìš°ì €ì˜ ì˜µì…˜ì„ ì„¤ì •í•˜ê¸° ìœ„í•œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
ChromeService(executable_path=ChromeDriverManager().install())ëŠ” Chrome ì›¹ ë“œë¼ì´ë²„ì˜ ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
ChromeDriverManager().install()ëŠ” Chrome ë“œë¼ì´ë²„ì˜ ê²½ë¡œë¥¼ ì„¤ì •í•˜ê³ , í•„ìš”ì‹œ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•©ë‹ˆë‹¤.
ì´ë¥¼ í†µí•´ ìš´ì˜ì²´ì œì— ë§ëŠ” Chrome ë“œë¼ì´ë²„ë¥¼ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì„¤ì •í•©ë‹ˆë‹¤.

<br />

- ì›¹ ë“œë¼ì´ë²„ ì„¤ì •(2)

```javascript
browser = webdriver.Chrome((service = service), (options = options));
```

ì´ ì½”ë“œëŠ” Chrome ë¸Œë¼ìš°ì €ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ ì›¹ ë“œë¼ì´ë²„ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
webdriver.Chrome()ì€ Chrome ë¸Œë¼ìš°ì €ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ WebDriver ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
ì´ë•Œ, serviceì™€ options ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•˜ì—¬ Chrome ì›¹ ë“œë¼ì´ë²„ ì„œë¹„ìŠ¤ì™€ ì˜µì…˜ì„ ì„¤ì •í•©ë‹ˆë‹¤.
ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ Seleniumì´ Chrome ë¸Œë¼ìš°ì €ë¥¼ ì œì–´í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

<br />

- Chrome ë¸Œë¼ìš°ì € í•´ë‹¹ URLë¡œ ì´ë™

```javascript
browser.get(
  "https://music.apple.com/kr/playlist/%EC%98%A4%EB%8A%98%EC%9D%98-top-100-%EB%8C%80%ED%95%9C%EB%AF%BC%EA%B5%AD/pl.d3d10c32fbc540b38e266367dc8cb00c"
);
```

ì´ ë¶€ë¶„ì€ Seleniumì„ ì‚¬ìš©í•˜ì—¬ Chrome ë¸Œë¼ìš°ì €ë¥¼ í•´ë‹¹ URLë¡œ ì´ë™ì‹œí‚¤ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
browser.get() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì£¼ì–´ì§„ URLì— í•´ë‹¹í•˜ëŠ” ì›¹ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
ì´ ì½”ë“œì—ì„œëŠ” Apple Musicì—ì„œ í•œêµ­ì˜ ìƒìœ„ 100ê³¡ì„ ë‹´ì€ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.

<br />

- í˜ì´ì§€ê°€ ì™„ì „íˆ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°

```javascript
WebDriverWait(browser, 10).until(
  EC.presence_of_element_located((By.CLASS_NAME, "songs-list"))
);
```

ì´ ë¶€ë¶„ì€ í˜ì´ì§€ê°€ ì™„ì „íˆ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. WebDriverWait ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœëŒ€ 10ì´ˆê°„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
EC.presence_of_element_located((By.CLASS_NAME, "songs-list"))ëŠ” "songs-list" í´ë˜ìŠ¤ ì´ë¦„ì„ ê°€ì§„ ìš”ì†Œê°€ í˜ì´ì§€ì— ë‚˜íƒ€ë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
ì´ë¥¼ í†µí•´ í˜ì´ì§€ì˜ ë¡œë”©ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

<br />

- ì—…ë°ì´íŠ¸ëœ í˜ì´ì§€ ì†ŒìŠ¤ë¥¼ ë³€ìˆ˜ì— ì €ì¥

```javascript
html_source_updated = browser.page_source;
soup = BeautifulSoup(html_source_updated, "html.parser");
```

ì´ ì½”ë“œëŠ” ì›¹ í˜ì´ì§€ì˜ ì—…ë°ì´íŠ¸ëœ ì†ŒìŠ¤ì½”ë“œë¥¼ ê°€ì ¸ì™€ BeautifulSoupì„ ì‚¬ìš©í•˜ì—¬ íŒŒì‹±í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
browser.page_sourceëŠ” Seleniumì„ ì‚¬ìš©í•˜ì—¬ ë¸Œë¼ìš°ì €ì— í‘œì‹œëœ í˜„ì¬ í˜ì´ì§€ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
ê·¸ë¦¬ê³  ì´ë¥¼ BeautifulSoupìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ ë³€ìˆ˜ soupì— ì €ì¥í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ íŒŒì‹±ëœ HTML ì†ŒìŠ¤ë¥¼ ë¶„ì„í•˜ì—¬ í•„ìš”í•œ ì •ë³´ë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

- ë…¸ë˜ì •ë³´ ì¶”ì¶œ

```javascript
song_data = []
songs_list = soup.find_all('div', class_='songs-list-row', role='row')

for song in songs_list:
```

ì´ ë¶€ë¶„ì€ ì¶”ì¶œí•œ HTMLì—ì„œ ê° ë…¸ë˜ì˜ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
BeautifulSoupì˜ find_all() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ HTMLì—ì„œ div íƒœê·¸ ì¤‘ classê°€ 'songs-list-row'ì´ê³  roleì´ 'row'ì¸ ìš”ì†Œë“¤ì„ ëª¨ë‘ ì°¾ìŠµë‹ˆë‹¤.
ì´í›„ for ë£¨í”„ë¥¼ í†µí•´ ê° ë…¸ë˜ì˜ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤. ì´ ë¶€ë¶„ì€ ì•„ë˜ì˜ ì½”ë“œì—ì„œ ì„¤ëª…ì„ ì´ì–´ë‚˜ê°ˆê²Œìš”.

<br />

- ê° ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ìš”ì†Œ ì°¾ê¸°

```javascript
ranking = song.find("div", (class_ = "songs-list-row__rank")).text.strip();
title = song.find("div", (class_ = "songs-list-row__song-name")).text.strip();
artist = song.find("a", { "data-testid": "click-action" }).text.strip();
album = song.find_all("a", { "data-testid": "click-action" })[1].text.strip();
img_tag = song.find("picture").find("source", (type = "image/webp"));
```

ì´ ë¶€ë¶„ì€ ê° ë…¸ë˜ì—ì„œ ìˆœìœ„, ì œëª©, ì•„í‹°ìŠ¤íŠ¸, ì•¨ë²”, ì´ë¯¸ì§€ URLì„ ì¶”ì¶œí•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
BeautifulSoupì˜ find() ë° find_all() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ìš”ì†Œë¥¼ ì°¾ìŠµë‹ˆë‹¤.
ranking, title, artist, album ë³€ìˆ˜ì—ëŠ” ê°ê° ë…¸ë˜ì˜ ìˆœìœ„, ì œëª©, ì•„í‹°ìŠ¤íŠ¸, ì•¨ë²” ì •ë³´ê°€ ì €ì¥ë˜ë©°, img_tag ë³€ìˆ˜ì—ëŠ” ë…¸ë˜ì˜ ì´ë¯¸ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” HTML íƒœê·¸ê°€ ì €ì¥ë©ë‹ˆë‹¤.

<br />

- ì´ë¯¸ì§€ URL ì¶”ì¶œ

```javascript
    if img_tag:
        image_sources = img_tag['srcset']
        image_url = next((src.split(' ')[0] for src in image_sources.split(',') if '80x80bb.webp' in src), "No image available")
    else:
        image_url = "No image available"
```

ì´ ë¶€ë¶„ì€ ë…¸ë˜ì˜ ì´ë¯¸ì§€ URLì„ ì¶”ì¶œí•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
img_tag ë³€ìˆ˜ì— ì´ë¯¸ì§€ íƒœê·¸ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°,srcset ì†ì„±ì—ì„œ ì´ë¯¸ì§€ì˜ URLì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
ì´ë¯¸ì§€ì˜ í¬ê¸°ê°€ 80x80ì¸ ê²½ìš°ì— í•´ë‹¹í•˜ëŠ” URLì„ ì°¾ì•„ image_url ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
ë§Œì•½ ì´ë¯¸ì§€ íƒœê·¸ê°€ ì—†ëŠ” ê²½ìš°, "No image available" ë¬¸ìì—´ì„ image_url ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
ì´ë ‡ê²Œ í•˜ë©´ ê° ë…¸ë˜ì˜ ì´ë¯¸ì§€ URLì„ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

- ê° ë…¸ë˜ì˜ ì •ë³´ë¥¼ dataì— ì¶”ê°€

```javascript
song_data.append({
  ranking: ranking,
  title: title,
  artist: artist,
  album: album,
  image_url: image_url,
});
```

ì´ ë¶€ë¶„ì€ ê° ë…¸ë˜ì˜ ì •ë³´ë¥¼ song_data ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
ranking, title, artist, album, image_url ë³€ìˆ˜ì— ì €ì¥ëœ ê°ê°ì˜ ì •ë³´ë¥¼ ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ êµ¬ì„±í•˜ì—¬ song_data ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.
ì´ë ‡ê²Œ í•˜ë©´ ëª¨ë“  ë…¸ë˜ì˜ ì •ë³´ê°€ song_data ë¦¬ìŠ¤íŠ¸ì— ì €ì¥ë˜ê²Œ ë©ë‹ˆë‹¤.

<br />

- ì¶”ì¶œëœ ë°ì´í„°ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥

```javascript
with open(filename, 'w', encoding='utf-8') as f:
    json.dump(song_data, f, ensure_ascii=False, indent=4)
```

ì´ ë¶€ë¶„ì€ ì¶”ì¶œí•œ ë…¸ë˜ ë°ì´í„°ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
filename ë³€ìˆ˜ì— ì§€ì •ëœ íŒŒì¼ ì´ë¦„ìœ¼ë¡œ JSON íŒŒì¼ì„ ì—´ê³ , ì¶”ì¶œí•œ ë…¸ë˜ ë°ì´í„°ë¥¼ í•´ë‹¹ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.
json.dump() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ song_data ë¦¬ìŠ¤íŠ¸ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ê³ , ì´ë¥¼ íŒŒì¼ì— ì‘ì„±í•©ë‹ˆë‹¤.
ensure_ascii=False ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ìœ ë‹ˆì½”ë“œ ë¬¸ìë¥¼ ì¸ì½”ë”©í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ê³ , indent=4 ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë“¤ì—¬ì“°ê¸°ë¥¼ ì¶”ê°€í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì…ë‹ˆë‹¤.

<br />

- ë¸Œë¼ìš°ì € ì¢…ë£Œ

```javascript
browser.quit();
```

ë§ˆì§€ë§‰ìœ¼ë¡œ, ì´ ì½”ë“œëŠ” ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
Seleniumì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì œì–´í•  ë•ŒëŠ” ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ë°˜ë“œì‹œ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí•´ì•¼ í•©ë‹ˆë‹¤.
browser.quit() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ í˜„ì¬ ì—´ë ¤ ìˆëŠ” ëª¨ë“  ì°½ê³¼ ì„¸ì…˜ì„ ë‹«ìŠµë‹ˆë‹¤.
ì´ë ‡ê²Œ í•˜ë©´ ì›¹ ë¸Œë¼ìš°ì € ìì›ì„ í•´ì œí•˜ê³  ë©”ëª¨ë¦¬ë¥¼ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì „ì²´ì ì¸ ì½”ë“œë¥¼ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤ ì´ëŒ€ë¡œë§Œ ì…ë ¥í•˜ì‹œë©´ ë¶ˆëŸ¬ì˜¤ê¸°ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ğŸ˜‰

```javascript
from selenium import webdriver
from selenium.webdriver.chrome.service import Service as ChromeService
from selenium.webdriver.chrome.options import Options as ChromeOptions
from webdriver_manager.chrome import ChromeDriverManager
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from bs4 import BeautifulSoup
from datetime import datetime
import time
import json

# í˜„ì¬ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°
current_date = datetime.now().strftime("%Y-%m-%d")
filename = f"chart_apple100_{current_date}.json"

# ì›¹ ë“œë¼ì´ë¸Œ ì„¤ì¹˜
options = ChromeOptions()
service = ChromeService(executable_path=ChromeDriverManager().install())
browser = webdriver.Chrome(service=service, options=options)
browser.get("https://music.apple.com/kr/playlist/%EC%98%A4%EB%8A%98%EC%9D%98-top-100-%EB%8C%80%ED%95%9C%EB%AF%BC%EA%B5%AD/pl.d3d10c32fbc540b38e266367dc8cb00c")

# í˜ì´ì§€ê°€ ì™„ì „íˆ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
WebDriverWait(browser, 10).until(
    EC.presence_of_element_located((By.CLASS_NAME, "songs-list"))
)

# ì—…ë°ì´íŠ¸ëœ í˜ì´ì§€ ì†ŒìŠ¤ë¥¼ ë³€ìˆ˜ì— ì €ì¥
html_source_updated = browser.page_source
soup = BeautifulSoup(html_source_updated, 'html.parser')

# ë…¸ë˜ ì •ë³´ë¥¼ ì¶”ì¶œ
song_data = []
songs_list = soup.find_all('div', class_='songs-list-row', role='row')

for song in songs_list:
    ranking = song.find('div', class_='songs-list-row__rank').text.strip()
    title = song.find('div', class_='songs-list-row__song-name').text.strip()
    artist = song.find('a', {'data-testid': 'click-action'}).text.strip()
    album = song.find_all('a', {'data-testid': 'click-action'})[1].text.strip()
    img_tag = song.find('picture').find('source', type="image/webp")  # More specific targeting to webp images
    if img_tag:
        image_sources = img_tag['srcset']
        # Extracting the desired 80x80 webp image URL from srcset
        image_url = next((src.split(' ')[0] for src in image_sources.split(',') if '80x80bb.webp' in src), "No image available")
    else:
        image_url = "No image available"

    song_data.append({
        'ranking': ranking,
        'title': title,
        'artist': artist,
        'album': album,
        'image_url': image_url
    })

# ì¶”ì¶œëœ ë°ì´í„°ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥
with open(filename, 'w', encoding='utf-8') as f:
    json.dump(song_data, f, ensure_ascii=False, indent=4)

# ë¸Œë¼ìš°ì € ì¢…ë£Œ
browser.quit()
```

ì—¬ê¸°ê¹Œì§€ pythonì„ ì´ìš©í•˜ì—¬ ìŒì•…ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë²•ì— ëŒ€í•´ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤.
ë„ì›€ì´ ë˜ì…¨ê¸¸ ë°”ë¼ë©° ì´ë§Œ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.
ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤.ğŸ«¶ğŸ˜Š
